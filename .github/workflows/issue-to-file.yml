name: Issue to File

on:
  issues:
    types: [opened]

jobs:
  issue_to_file:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Configure Git
        run: |
          git config --global user.name 'github-actions[bot]'
          git config --global user.email 'github-actions[bot]@users.noreply.github.com'
      
      - name: Create or Update File from Issue
        run: |
          ISSUE_TITLE="${{ github.event.issue.title }}"
          ISSUE_BODY="${{ github.event.issue.body }}"
          FILE_NAME=$(echo "$ISSUE_TITLE" | tr ' ' '_').md

          echo "Processing file: $FILE_NAME"
          echo "Issue body: $ISSUE_BODY"

          if [[ -f "$FILE_NAME" ]]; then
            echo "$ISSUE_BODY" >> "$FILE_NAME"
            git add "$FILE_NAME"
            git commit -m "Update file for issue $ISSUE_TITLE"
          else
            echo "$ISSUE_BODY" > "$FILE_NAME"
            git add "$FILE_NAME"
            git commit -m "Add file for issue $ISSUE_TITLE"
          fi

          git push
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
